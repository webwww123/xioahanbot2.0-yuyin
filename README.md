<<<<<<< HEAD
# ç²‰è‰²å°‘å¥³å¿ƒè¯­éŸ³èŠå¤©å‰ç«¯

ä¸€ä¸ªæžç®€çŽ°ä»£ã€ä¼˜é›…çš„äº¤äº’å¼è¯­éŸ³èŠå¤©å‰ç«¯ï¼Œé‡‡ç”¨ç²‰è‰²ç³»è®¾è®¡é£Žæ ¼ï¼Œå……æ»¡å°‘å¥³å¿ƒçš„UIç•Œé¢ï¼Œé›†æˆäº†æœ€æ–°çš„Google Gemini AIæ¨¡åž‹ã€‚

## é¡¹ç›®ç‰¹ç‚¹

- ðŸ’• ç²‰è‰²ç³»å°‘å¥³å¿ƒè®¾è®¡é£Žæ ¼
- ðŸŽ¨ æžç®€çŽ°ä»£çš„UIç•Œé¢
- ðŸ”Š ä¸­å¤®è¯­éŸ³æŒ‰é’®ï¼ŒæŒ‰ä½è¯´è¯
- âŒ¨ï¸ æ”¯æŒæ–‡å­—è¾“å…¥åŠŸèƒ½
- âœ¨ ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæžœå’Œäº¤äº’
- ðŸ’¬ æ¶ˆæ¯æ°”æ³¡ä¼˜é›…æ·¡å…¥æ·¡å‡ºå’Œæ‰“å­—æ•ˆæžœ
- ðŸŒˆ ç²¾ç¾Žçš„è£…é¥°å…ƒç´ å’ŒèƒŒæ™¯
- ðŸ’– æµç•…çš„å˜å½¢åŠ¨ç”»å’Œç²’å­æ•ˆæžœ
- ðŸ¤– é›†æˆGoogle Gemini AIæ¨¡åž‹çš„èŠå¤©åŠŸèƒ½
- ðŸ”Œ è‡ªå®šä¹‰Deno Deploy APIä»£ç†

## æŠ€æœ¯æ ˆ

- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- Framer Motion
- Google Gemini API
- Deno Deploy (åŽç«¯APIä»£ç†)
- ç™¾åº¦è¯­éŸ³è¯†åˆ«API

## åŠŸèƒ½ä»‹ç»

1. **è¯­éŸ³è¾“å…¥**ï¼šæŒ‰ä½ä¸­å¤®çš„ç²‰è‰²æŒ‰é’®è¿›è¡Œè¯­éŸ³è¾“å…¥ï¼Œè‡ªåŠ¨è°ƒç”¨ç™¾åº¦è¯­éŸ³è¯†åˆ«API
2. **æ–‡å­—è¾“å…¥**ï¼šç‚¹å‡»æŒ‰é’®å³ä¸‹è§’çš„èŠå¤©å›¾æ ‡ï¼ŒæŒ‰é’®ä¼˜é›…å˜å½¢ä¸ºæ–‡å­—è¾“å…¥æ¡†
3. **AIå¯¹è¯**ï¼šé€šè¿‡Google Gemini AIæ¨¡åž‹æä¾›æ™ºèƒ½å¯¹è¯èƒ½åŠ›
4. **æ¶ˆæ¯æ˜¾ç¤º**ï¼š
   - æ¶ˆæ¯ä»¥æ°”æ³¡å½¢å¼åœ¨ä¸Šæ–¹ä¼˜é›…æ˜¾ç¤º
   - æ”¯æŒæ‰“å­—æœºæ•ˆæžœï¼Œé€å­—æ˜¾ç¤ºAIå›žå¤
   - æ¶ˆæ¯æ°”æ³¡ä¼šéšç€å†…å®¹åŠ¨æ€è°ƒæ•´å¤§å°
5. **ç²¾ç¾ŽåŠ¨ç”»**ï¼š
   - æŒ‰é’®åé¦ˆåŠ¨ç”»å’Œæ³¢çº¹æ•ˆæžœ
   - æ¶ˆæ¯æ°”æ³¡å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
   - èƒŒæ™¯è£…é¥°åŠ¨ç”»å’Œå¿ƒå½¢æ•ˆæžœ
   - æ–‡æœ¬æ¡†å˜å½¢åŠ¨ç”»
   - å¿ƒå½¢å’Œç²’å­ç‰¹æ•ˆ

## APIé›†æˆ

### Gemini AIé›†æˆ

é¡¹ç›®é€šè¿‡è‡ªå®šä¹‰çš„Deno DeployæœåŠ¡é›†æˆäº†Google Gemini APIï¼ŒåŒ…æ‹¬ï¼š

- æ”¯æŒgemini-2.0-pro-exp-02-05ç­‰æœ€æ–°æ¨¡åž‹
- å…¼å®¹OpenAI APIæ ¼å¼çš„è¯·æ±‚å’Œå“åº”
- æ”¯æŒèŠå¤©å®Œæˆã€åµŒå…¥å‘é‡ç­‰åŠŸèƒ½
- å†…ç½®è·¨åŸŸ(CORS)è§£å†³æ–¹æ¡ˆ
- é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- æ™ºèƒ½è¯·æ±‚é‡è¯•å’Œé™é€Ÿå¤„ç†

### è¯­éŸ³è¯†åˆ«é›†æˆ

é›†æˆäº†ç™¾åº¦è¯­éŸ³è¯†åˆ«APIï¼š

- æ”¯æŒä¸­æ–‡è¯­éŸ³è¯†åˆ«
- å®žæ—¶å½•éŸ³å’Œè½¬å†™
- é”™è¯¯æ¢å¤å’Œé‡è¯•æœºåˆ¶

## å¦‚ä½•ä½¿ç”¨

1. å…‹éš†æœ¬ä»“åº“
2. å®‰è£…ä¾èµ–ï¼š`npm install`
3. å¼€å‘æ¨¡å¼è¿è¡Œï¼š`npm run dev`
4. è®¿é—® `http://localhost:3002` æˆ– `http://localhost:3000`

## APIè°ƒè¯•å·¥å…·

é¡¹ç›®å†…ç½®äº†ä¸“ä¸šçš„APIè°ƒè¯•å·¥å…·ï¼š

- ä½äºŽ `/api-debug` è·¯å¾„
- æ”¯æŒæµ‹è¯•ä¸åŒçš„Gemini APIç«¯ç‚¹
- æŸ¥çœ‹è¯·æ±‚å’Œå“åº”è¯¦æƒ…
- å†…ç½®é”™è¯¯å¤„ç†å’Œå‹å¥½æç¤º
- æ”¯æŒç›´æŽ¥æ‰“å¼€APIé“¾æŽ¥
- æ¨¡åž‹å¿«é€Ÿåˆ‡æ¢åŠŸèƒ½

## ç»„ä»¶ç»“æž„

- **VoiceChat**: ä¸»è¦ç»„ä»¶ï¼Œé›†æˆæ‰€æœ‰åŠŸèƒ½
- **VoiceButton**: ä¸­å¤®è¯­éŸ³æŒ‰é’®ï¼ŒåŒ…å«å˜å½¢æ–‡æœ¬è¾“å…¥åŠŸèƒ½
- **MessagesArea**: æ¶ˆæ¯æ˜¾ç¤ºåŒºåŸŸï¼Œæ”¯æŒåŠ¨æ€è°ƒæ•´å’Œè‡ªåŠ¨æ»šåŠ¨
- **MessageBubble**: å•ä¸ªæ¶ˆæ¯æ°”æ³¡ï¼Œæ”¯æŒæ‰“å­—æ•ˆæžœå’ŒåŠ¨æ€å¤§å°è°ƒæ•´
- **Decorations**: è£…é¥°å…ƒç´ ç»„ä»¶

## ä¼˜åŒ–ç‰¹æ€§

### 1. æ€§èƒ½ä¼˜åŒ–

- ä½¿ç”¨React.memoå‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“
- ä¼˜åŒ–Framer MotionåŠ¨ç”»æ€§èƒ½
- æ¶ˆæ¯æ°”æ³¡ä½¿ç”¨ResizeObserverç›‘æŽ§å¤§å°å˜åŒ–
- ç¡¬ä»¶åŠ é€ŸåŠ¨ç”»æ•ˆæžœ
- å‡å°‘å¸ƒå±€æŠ–åŠ¨

### 2. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

- æ¶ˆæ¯é€å­—æ‰“å­—æ˜¾ç¤ºï¼Œå¢žå¼ºäº’åŠ¨æ„Ÿ
- æ ¹æ®æ–‡æœ¬é•¿åº¦è‡ªåŠ¨è°ƒæ•´æ‰“å­—é€Ÿåº¦
- æ‰“å­—è¿‡ç¨‹ä¸­æ¶ˆæ¯æ°”æ³¡å¹³æ»‘æ‰©å±•
- è‡ªåŠ¨æ»šåŠ¨ç¡®ä¿å§‹ç»ˆæ˜¾ç¤ºæœ€æ–°æ¶ˆæ¯
- å½•éŸ³æŒ‰é’®æä¾›æ¸…æ™°çš„è§†è§‰åé¦ˆ

### 3. APIå¯é æ€§

- å®žçŽ°äº†APIè¯·æ±‚å¤±è´¥çš„è‡ªåŠ¨é‡è¯•æœºåˆ¶
- æ·»åŠ äº†åŒé‡è¯·æ±‚ç­–ç•¥ï¼ˆfetchå’ŒXMLHttpRequestï¼‰
- è§£å†³äº†è·¨åŸŸè¯·æ±‚é—®é¢˜
- å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- æ™ºèƒ½å¤„ç†APIé™é€Ÿï¼ˆ429é”™è¯¯ï¼‰
- è‡ªé€‚åº”é‡è¯•é—´éš”

## Deno Deployéƒ¨ç½²æ–¹æ¡ˆ

æœ¬é¡¹ç›®ä½¿ç”¨Deno Deployä½œä¸ºåŽç«¯æœåŠ¡ï¼ŒDeno Deployæ˜¯ä¸€ä¸ªå…¨çƒåˆ†å¸ƒå¼çš„æ— æœåŠ¡å™¨JavaScriptåº”ç”¨å¹³å°ï¼Œä»£ç åœ¨é è¿‘ç”¨æˆ·çš„æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œæä¾›ä½Žå»¶è¿Ÿå’Œå¿«é€Ÿå“åº”æ—¶é—´ã€‚æˆ‘ä»¬çš„Gemini APIä»£ç†æœåŠ¡é€šè¿‡Deno Deployéƒ¨ç½²ï¼Œä»¥ä¸‹æ˜¯å®Œæ•´æ“ä½œæŒ‡å—ï¼š

### 1. å®‰è£…Denoå’Œdeployctl

é¦–å…ˆï¼Œå®‰è£…Denoè¿è¡Œæ—¶å’Œdeployctlå·¥å…·ï¼š

```bash
# å®‰è£…Deno
# Windows
irm https://deno.land/install.ps1 | iex

# macOS/Linux
curl -fsSL https://deno.land/install.sh | sh

# å®‰è£…deployctl
deno install -A jsr:@deno/deployctl --global
```

### 2. éƒ¨ç½²æ­¥éª¤

æˆ‘ä»¬çš„APIä»£ç†æœåŠ¡éƒ¨ç½²æµç¨‹ï¼š

```bash
# è¿›å…¥Denoéƒ¨ç½²ä»£ç ç›®å½•
cd src/deno_deploy

# éƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒ
deployctl deploy --project=pink-chat-api --prod main.ts
```

### 3. çŽ°æœ‰éƒ¨ç½²

é¡¹ç›®å½“å‰çš„APIä»£ç†æœåŠ¡å·²éƒ¨ç½²åœ¨ä»¥ä¸‹ç«¯ç‚¹ï¼š

- **åŸºç¡€URL**: `https://pink-chat-api.deno.dev`
- **ç«¯ç‚¹åˆ—è¡¨**:
  - æ¨¡åž‹åˆ—è¡¨: `https://pink-chat-api.deno.dev/v1/models?key=YOUR_API_KEY`
  - èŠå¤©å®Œæˆ: `https://pink-chat-api.deno.dev/v1/chat/completions`
  - åµŒå…¥å‘é‡: `https://pink-chat-api.deno.dev/v1/embeddings`

### 4. ç›‘æŽ§ä¸Žè°ƒè¯•

Deno Deployæä¾›äº†å¤šç§ç›‘æŽ§å’Œè°ƒè¯•å·¥å…·ï¼š

```bash
# åˆ—å‡ºé¡¹ç›®æ‰€æœ‰éƒ¨ç½²
deployctl deployments list --project=pink-chat-api

# æŸ¥çœ‹å®žæ—¶æ—¥å¿—
deployctl logs --project=pink-chat-api
```

å¦å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡Deno Deployçš„ä»ªè¡¨æ¿æŸ¥çœ‹è¯¦ç»†çš„éƒ¨ç½²çŠ¶æ€ã€æ—¥å¿—å’Œæ€§èƒ½æŒ‡æ ‡ã€‚

### 5. çŽ¯å¢ƒå˜é‡ä¸Žè‡ªå®šä¹‰åŸŸå

å¦‚éœ€é…ç½®çŽ¯å¢ƒå˜é‡æˆ–è®¾ç½®è‡ªå®šä¹‰åŸŸåï¼Œå¯é€šè¿‡Deno Deployä»ªè¡¨æ¿è¿›è¡Œè®¾ç½®ï¼Œæˆ–ä½¿ç”¨deployctlå‘½ä»¤ï¼š

```bash
# è®¾ç½®çŽ¯å¢ƒå˜é‡
deployctl variables set --project=pink-chat-api KEY=value

# èŽ·å–çŽ¯å¢ƒå˜é‡åˆ—è¡¨
deployctl variables list --project=pink-chat-api
```

### 6. èµ„æºå’Œé™åˆ¶

Deno Deployæä¾›äº†ä¸åŒçš„å®šä»·å±‚çº§ï¼Œä»Žå…è´¹å±‚åˆ°ä¼ä¸šçº§ï¼Œæœ¬é¡¹ç›®ç›®å‰ä½¿ç”¨å…è´¹å±‚çº§ï¼Œæ¯å¤©æœ‰10ä¸‡è¯·æ±‚çš„é™é¢ã€‚å¦‚éœ€æ›´é«˜çš„é…é¢ï¼Œå¯ä»¥å‡çº§åˆ°ä»˜è´¹è®¡åˆ’ã€‚

### 7. é”™è¯¯å¤„ç†ä¸Žé™é€Ÿ

Gemini APIæœ‰è¯·æ±‚é¢‘çŽ‡é™åˆ¶ï¼Œæˆ‘ä»¬çš„ä»£ç†æœåŠ¡å®žçŽ°äº†ï¼š

- **è‡ªåŠ¨é‡è¯•æœºåˆ¶**ï¼šé‡åˆ°é™é€Ÿï¼ˆ429ï¼‰é”™è¯¯æ—¶ï¼Œè‡ªåŠ¨ç­‰å¾…å¹¶é‡è¯•
- **æŒ‡æ•°é€€é¿ç®—æ³•**ï¼šæ¯æ¬¡é‡è¯•é—´éš”é€æ¸å¢žåŠ 
- **å‹å¥½é”™è¯¯æç¤º**ï¼šå‘å®¢æˆ·ç«¯è¿”å›žè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- **å®Œæ•´æ—¥å¿—è®°å½•**ï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œé”™è¯¯ä¿¡æ¯ä»¥ä¾¿è°ƒè¯•

### 8. æœ€æ–°æ›´æ–° (2025å¹´3æœˆ11æ—¥)

- ä¿®å¤äº†Deno Deployå…¼å®¹æ€§é—®é¢˜
- ä¼˜åŒ–äº†Bufferå¯¼å…¥æ–¹å¼
- ç®€åŒ–äº†æœåŠ¡å™¨å¯åŠ¨ä»£ç 
- æ·»åŠ äº†æ™ºèƒ½è¯·æ±‚é‡è¯•é€»è¾‘
- å¢žå¼ºäº†é”™è¯¯å¤„ç†ï¼Œç‰¹åˆ«æ˜¯å¯¹429é”™è¯¯çš„å¤„ç†
- å®žçŽ°äº†æŒ‡æ•°é€€é¿ç®—æ³•ä¼˜åŒ–é‡è¯•é—´éš”

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒ[Deno Deployå®˜æ–¹æ–‡æ¡£](https://docs.deno.com/deploy/manual/)ã€‚

## è‡ªå®šä¹‰é…ç½®

- å¯åœ¨`tailwind.config.js`ä¸­è°ƒæ•´é¢œè‰²é…ç½®
- æ‰“å­—é€Ÿåº¦å’Œæ•ˆæžœå¯åœ¨`MessageBubble.tsx`ä¸­è°ƒæ•´
- APIé…ç½®å¯åœ¨`VoiceChatContext.tsx`ä¸­ä¿®æ”¹
- åŠ¨ç”»æ•ˆæžœå’Œæ—¶é•¿å¯åœ¨å„ç»„ä»¶çš„Framer Motioné…ç½®ä¸­è°ƒæ•´
- Deno APIé…ç½®å¯åœ¨`src/deno_deploy/main.ts`ä¸­ä¿®æ”¹

## åŽç»­æ‰©å±•

- å¤šæ¨¡åž‹åˆ‡æ¢æ”¯æŒ
- åŽ†å²å¯¹è¯ä¿å­˜
- å›¾åƒç”ŸæˆåŠŸèƒ½
- è¯­éŸ³åˆæˆï¼ˆæ–‡å­—è½¬è¯­éŸ³ï¼‰
- ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
- å¤šè¯­è¨€æ”¯æŒ
- è¡¨æƒ…å’Œè´´çº¸æ”¯æŒ

## é¡¹ç›®çŠ¶æ€

**å½“å‰ç‰ˆæœ¬**: v1.2.1  
**æœ€è¿‘æ›´æ–°**: 2025å¹´3æœˆ11æ—¥

### æœ€è¿‘æ”¹è¿›:
- âœ… ä¿®å¤äº†Deno APIéƒ¨ç½²é—®é¢˜
- âœ… æ·»åŠ äº†APIè¯·æ±‚é‡è¯•å’Œæ™ºèƒ½é™é€Ÿå¤„ç†
- âœ… ä¼˜åŒ–äº†æ¶ˆæ¯æ°”æ³¡çš„æ‰“å­—æ•ˆæžœ
- âœ… ä¿®å¤äº†æ¶ˆæ¯ä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¾ç¤ºçš„é—®é¢˜
- âœ… æ”¹è¿›äº†é•¿æ–‡æœ¬çš„æ‰“å­—é€Ÿåº¦
- âœ… è§£å†³äº†æ¶ˆæ¯æ°”æ³¡é—ªçƒé—®é¢˜
- âœ… ä¼˜åŒ–äº†èŠå¤©åŒºåŸŸçš„å¸ƒå±€å’Œé™ä½
- âœ… æ›´æ–°è‡³æœ€æ–°çš„gemini-2.0-pro-exp-02-05æ¨¡åž‹
- âœ… å¢žå¼ºäº†APIè¯·æ±‚çš„å¯é æ€§å’Œé”™è¯¯å¤„ç†

---

âœ¨ **å¤§é»„å‡ºå“** âœ¨ 
=======
# xioahanbot2.0-yuyin
>>>>>>> 0a3cd9e43d36c26d17a0237d584d5fcdf7cd5a96
